<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="BlueWhaleYT">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://bluewhaleyt.github.io/post/android_dev_sora_editor_library_with_textmate_0_18_1.html"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="Hello, welcome to this blog. Today, we’re going to use Sora Editor with TextMate in version 0.18.1 using Java. The source codes that show in this article may be deprecated or not working as the develo">
<meta property="og:type" content="article">
<meta property="og:title" content="Using Sora Editor with TextMate 0.18.1">
<meta property="og:url" content="https://bluewhaleyt.github.io/post/android_dev_sora_editor_library_with_textmate_0_18_1.html">
<meta property="og:site_name" content="BlueWhaleYT 個人網誌">
<meta property="og:description" content="Hello, welcome to this blog. Today, we’re going to use Sora Editor with TextMate in version 0.18.1 using Java. The source codes that show in this article may be deprecated or not working as the develo">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2022-12-09T02:35:50.000Z">
<meta property="article:modified_time" content="2023-04-27T08:56:10.022Z">
<meta property="article:author" content="BlueWhaleYT">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://i.ibb.co/zRvn96K/20210718-233824.jpg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/zRvn96K/20210718-233824.jpg">
    <meta name="theme-color" content="#6190e8">
    <link rel="shortcut icon" href="https://i.ibb.co/zRvn96K/20210718-233824.jpg">
    <!--- Page Info-->
    
    <title>
        
            Using Sora Editor with TextMate 0.18.1 -
        
        BlueWhaleYT 個人網誌
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
        <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap'" rel="stylesheet">
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"bluewhaleyt.github.io","root":"/","language":"zh-TW","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"left","image_caption":true,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":true,"list":[""]},"code_block":{"copy":true,"style":"mac","font":{"enable":true,"family":"JetBrains Mono","url":"https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap'"}},"toc":{"enable":true,"max_depth":6,"number":true,"expand":true,"init_open":true},"copyright":false,"lazyload":false,"recommendation":{"enable":true,"title":"相關文章","limit":3,"placeholder":"https://i.imgur.com/tyHG03D.jpg","skip_dirs":[]}},"colors":{"primary":"#6190e8","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"2000px","sidebar_width":"210px","hover":{"shadow":true,"scale":true},"scroll_progress":{"bar":true,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true},"home_banner":{"enable":false,"image":{"light":null,"dark":null},"title":"BlueWhaleYT 個人網誌","subtitle":{"text":[],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#fff"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/BlueWhaleYT","instagram":null,"zhihu":null,"twitter":null,"email":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.1.2","navbar":{"auto_hide":false,"color":{"left":"#6190e8","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Status":{"path":"https://github.com/BlueWhaleYT/bluewhaleyt.github.io/deployments/activity_log?environment=github-pages","icon":"fa-regular fa-chart-bar"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/BlueWhaleYT/"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"info","announcement":"歡迎來到「BlueWhaleYT 個人網誌」。","links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s 秒前","minute":"%s 分鐘前","hour":"%s 小時前","day":"%s 天前","week":"%s 週前","month":"%s 個月前","year":"%s 年前"};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
        
<link rel="stylesheet" href="/fontawesome/duotone.min.css">

    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                BlueWhaleYT 個人網誌
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首頁
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        歸檔
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    target="_blank" rel="noopener" href="https://github.com/BlueWhaleYT/bluewhaleyt.github.io/deployments/activity_log?environment=github-pages"  >
                                    
                                        
                                            <i class="fa-regular fa-chart-bar"></i>
                                        
                                        狀態
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        關於&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/BlueWhaleYT/">GITHUB
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首頁
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                歸檔
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        target="_blank" rel="noopener" href="https://github.com/BlueWhaleYT/bluewhaleyt.github.io/deployments/activity_log?environment=github-pages"  >
                             
                                
                                    <i class="fa-regular fa-chart-bar"></i>
                                
                                狀態
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                關於&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">ME</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/BlueWhaleYT/">GITHUB</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
             
                <div class="article-title">         
                    <img src="https://i.imgur.com/l2eNEk0.jpg" alt="Using Sora Editor with TextMate 0.18.1" />
                    <h1 class="article-title-cover">Using Sora Editor with TextMate 0.18.1</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://i.ibb.co/zRvn96K/20210718-233824.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">BlueWhaleYT</span>
                            
                                <span class="author-label">Lv3</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2022-12-09 10:35:50</span>
        <span class="mobile">2022-12-09 10:35</span>
        <span class="hover-info">撰寫</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-04-27 16:56:10</span>
            <span class="mobile">2023-04-27 16:56</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Android-%E9%96%8B%E7%99%BC/">Android 開發</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Java/">Java</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>1.6k 字數</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>10 分鐘</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <p>Hello, welcome to this blog. Today, we’re going to use Sora Editor with TextMate in version <code>0.18.1</code> using Java.</p>
<div class="note note-danger icon-padding"><i class="note-icon fa-solid fa-times-circle"></i><p>The source codes that show in this article <strong>may be deprecated or not working</strong> as the development of <a target="_blank" href="https://github.com/Rosemoe/sora-editor">Sora Editor</a> is mushrooming rapidly. Thanksfully, the codes still work till <code>0.21.0</code>.</p>
<p>However, if there’s any breaking changes of the programs and methods, there will be an updated version in the foreseeable future.</p>
</div>


<hr>
<h1 id="Why-this-post"><a href="#Why-this-post" class="headerlink" title="Why this post?"></a>Why this post?</h1><p>Due to <strong>the open source code of Sora Editor’s demo application is all about in Kotlin</strong>, which is not friendly for the developers who may not figure out how to write and understand Kotlin codes, me also XD. In view of this, I’m here to show you how to use Sora Editor with TextMate in version <code>0.18.1</code> using Java.</p>
<hr>
<h1 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h1><hr>
<h2 id="Theme-files"><a href="#Theme-files" class="headerlink" title="Theme files"></a>Theme files</h2><p>If you don’t want to find and download yourself, you can download the theme files here. In this article, I will provide a theme of light mode and dark mode for one i.e. <code>quietlight</code> and <code>darcula</code> respectively.</p>
<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/u0wzx8mdek7lbe2/quietlight.json/file" title="quietlight.json"><i class="fa-solid fa-download"></i> quietlight.json</a>

<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/i5sp96tkvz5vjhy/darcula.json/file" title="darcula.json"><i class="fa-solid fa-download"></i> darcula.json</a>

<hr>
<h2 id="Language-files"><a href="#Language-files" class="headerlink" title="Language files"></a>Language files</h2><p>To make Textmate work, you need to prepare the files yourself. That said, you need to find relative resources from <a target="_blank" href="https://github.com/eclipse/tm4e">tm4e</a>. Here, I will provide Java language files as an example.</p>
<p>In the <code>java.zip</code>, there are several files you need, actually, they are the syntax files for <code>Java</code>, namely <code>java.tmLanguage.json</code> and <code>language-configuration.json</code> files.</p>
<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/m2ofjvn964hpr3r/java.zip/file" title="java.zip"><i class="fa-solid fa-download"></i> java.zip</a>

<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/odiso5pmtej8etl/languages.json/file" title="langauges.json"><i class="fa-solid fa-download"></i> langauges.json</a>

<hr>
<h3 id="Embedded-languages"><a href="#Embedded-languages" class="headerlink" title="Embedded languages"></a>Embedded languages</h3><p>Embedded language is to extend the syntax from one to more. That said, you can have CSS <code>&lt;style&gt;</code> and JavaScript <code>&lt;script&gt;</code> or other syntaxes with html language.</p>
<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/eoq1bke9kzz9ja0/html.zip/file" title="html.zip"><i class="fa-solid fa-download"></i> html.zip</a>

<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/uh8qrf3s725w3qn/css.zip/file" title="css.zip"><i class="fa-solid fa-download"></i> css.zip</a>

<a class="button " target="_blank" rel="noopener" href="https://www.mediafire.com/file/479fqy5x80yp2jz/javascript.zip/file" title="javascript.zip"><i class="fa-solid fa-download"></i> javascript.zip</a>

<p>To configure an embedded language, you need to do it in <code>languages.json</code>. Here is an example of HTML with CSS and JS embedded syntaxes.</p>
<div class="note note-warning icon-padding"><i class="note-icon fa-solid fa-exclamation-circle"></i><p>Before adding embedded languages <code>source.css</code> and <code>source.js</code>, you need to have these related files.</p>
</div>

<p>Keep in mind to the highlighted sections, <code>embeddedLanguages</code>.</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;languages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;html&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;scopeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text.html.basic&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;grammar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;textmate/html/syntaxes/html.tmLanguage.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;languageConfiguration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;textmate/html/language-configuration.json&quot;</span><span class="punctuation">,</span></span><br><span class="line marked">      <span class="attr">&quot;embeddedLanguages&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line marked">        <span class="attr">&quot;source.css&quot;</span><span class="punctuation">:</span> <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line marked">        <span class="attr">&quot;source.js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;javascript&quot;</span></span><br><span class="line marked">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;scopeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;source.css&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;grammar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;textmate/css/syntaxes/css.tmLanguage.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;languageConfiguration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;textmate/css/language-configuration.json&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;scopeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;source.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;grammar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;textmate/javascript/syntaxes/javascript.tmLanguage.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;languageConfiguration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;textmate/javascript/language-configuration.json&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<hr>
<h1 id="Programs"><a href="#Programs" class="headerlink" title="Programs"></a>Programs</h1><div class="note note-info icon-padding"><i class="note-icon fa-solid fa-info-circle"></i><p>Before you start, make sure you <strong>have prepared textmate themes and languages files</strong>. You may find them in <a href="https://github.com/eclipse/tm4e" target="_blank">TextMate</a> or from <a class="link" href="https://github.com/Rosemoe/sora-editor/tree/main/app/src/main" target="_blank">the source code of demo application <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>.</p>
</div>

<hr>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><hr>
<h3 id="Load-Default-Themes"><a href="#Load-Default-Themes" class="headerlink" title="Load Default Themes"></a>Load Default Themes</h3><p>Initialize all the themes that you want to be applied later.</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	FileProviderRegistry.getInstance().addFileProvider(<span class="keyword">new</span> <span class="title class_">AssetsFileResolver</span>(getAssets()));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// set the themes that you want them to be initialized</span></span><br><span class="line">    String[] themes = &#123;<span class="string">&quot;quietlight&quot;</span>, <span class="string">&quot;darcula&quot;</span>&#125;;</span><br><span class="line">    <span class="type">ThemeRegistry</span> <span class="variable">themeRegistry</span> <span class="operator">=</span> ThemeRegistry.getInstance();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; themes.length;) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> themes[i];</span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;textmate/&quot;</span> + name + <span class="string">&quot;.json&quot;</span>; <span class="comment">// e.g. it will get &quot;textmate/quietlight.json&quot; file from assets</span></span><br><span class="line">        themeRegistry.loadTheme(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">ThemeModel</span>(</span><br><span class="line">                IThemeSource.fromInputStream(</span><br><span class="line">                    FileProviderRegistry.getInstance().tryGetInputStream(path), path, <span class="literal">null</span></span><br><span class="line">                ), name</span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="Load-Default-Languages"><a href="#Load-Default-Languages" class="headerlink" title="Load Default Languages"></a>Load Default Languages</h3><hr>
<h4 id="Using-grammar-base"><a href="#Using-grammar-base" class="headerlink" title="Using grammar base"></a>Using grammar base</h4><p>We will use <code>languages.json</code> config file to load all the languages with their syntaxes and configuration.</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GrammarRegistry.getInstance().loadGrammars(<span class="string">&quot;textmate/languages.json&quot;</span>);</span><br></pre></td></tr></table></figure></div>

<p>There are several propeties of <code>languages.json</code> you need to keep in mind to.</p>
<ul>
<li><code>scopeName</code> - the scope of the language.</li>
</ul>
<p>how to know what is the scope name of the language? You can find it through the language syntax file. For example, you will find the scope name from <code>java.tmLanguage.json</code> file.</p>
<div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Java&quot;</span><span class="punctuation">,</span></span><br><span class="line marked"><span class="attr">&quot;scopeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;source.java&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>grammar</code> - the syntax and grammar of the language.</li>
<li><code>languageConfiguration</code> - the language configuration of the language e.g. auto complete brackets, auto indent etc.</li>
</ul>
<hr>
<h4 id="Using-DSL"><a href="#Using-DSL" class="headerlink" title="Using DSL"></a>Using DSL</h4><p>If you don’t want to load languages from <code>languages.json</code>, you can load them with <strong>DSL (Domain Specific Language)</strong> either. In this case, we load Java language as an example.</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">GrammarDefinition</span> <span class="variable">grammarDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GrammarDefinition</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;java&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLanguageConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;textmate/java/language-configuration.json&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getScopeName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;source.java&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IGrammarSource <span class="title function_">getGrammar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IGrammarSource</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getFilePath</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;textmate/java/syntaxes/java.tmLanguage.json&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Reader <span class="title function_">getReader</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">GrammarRegistry.getInstance().loadGrammar(grammarDefinition);</span><br><span class="line">GrammarRegistry.getInstance().loadLanguageAndLanguageConfiguration(grammarDefinition);</span><br></pre></td></tr></table></figure></div>

<hr>
<div class="note note-info icon-padding"><i class="note-icon fa-solid fa-info-circle"></i><p>Yet, I highly recommend you to load langauges with the grammar base <code>languages.json</code> file instead of loading them with DSL, you can have better adjustment.</p>
</div>


<hr>
<h3 id="Ensure-TextMate-Themes"><a href="#Ensure-TextMate-Themes" class="headerlink" title="Ensure TextMate Themes"></a>Ensure TextMate Themes</h3><p>This is for ensuring the colorscheme of <code>CodeEditor</code> being applied is the implementation of TextMate i.e. <code>TextMateColorScheme</code>, rather than the general one from <code>EditorColorScheme</code>.</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">EditorColorScheme</span> <span class="variable">colorScheme</span> <span class="operator">=</span> editor.getColorScheme();</span><br><span class="line">    <span class="keyword">if</span> (!(colorScheme <span class="keyword">instanceof</span> TextMateColorScheme)) &#123;</span><br><span class="line">        colorScheme = TextMateColorScheme.create(ThemeRegistry.getInstance());</span><br><span class="line">        editor.setColorScheme(colorScheme);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="Apply-Themes"><a href="#Apply-Themes" class="headerlink" title="Apply Themes"></a>Apply Themes</h3><p>Here, I will detect light theme and dark theme, the key is to use <code>ThemeRegistry.getInstance().setTheme()</code> to apply themes.</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">mode</span> <span class="operator">=</span> getResources().getConfiguration().uiMode &amp; Configuration.UI_MODE_NIGHT_MASK;</span><br><span class="line"><span class="keyword">switch</span> (mode) &#123;</span><br><span class="line">    <span class="keyword">case</span> Configuration.UI_MODE_NIGHT_YES: <span class="comment">// dark mode</span></span><br><span class="line marked">        ThemeRegistry.getInstance().setTheme(<span class="string">&quot;darcula&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> Configuration.UI_MODE_NIGHT_NO: <span class="comment">// light mode</span></span><br><span class="line marked">        ThemeRegistry.getInstance().setTheme(<span class="string">&quot;quietlight&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="Apply-Languages"><a href="#Apply-Languages" class="headerlink" title="Apply Languages"></a>Apply Languages</h3><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">TextMateLanguage language;</span><br><span class="line"><span class="type">Language</span> <span class="variable">editorLanguage</span> <span class="operator">=</span> editor.getEditorLanguage();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (editorLanguage <span class="keyword">instanceof</span> TextMateLanguage) &#123;</span><br><span class="line">	language = (TextMateLanguage) editorLanguage;</span><br><span class="line">    language.updateLanguage(<span class="string">&quot;source.java&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    language = TextMateLanguage.create(<span class="string">&quot;source.java&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">editor.setEditorLanguage(language);</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="Other-programs"><a href="#Other-programs" class="headerlink" title="Other programs"></a>Other programs</h2><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sora editor provides auto completion with TextMate by default,</span></span><br><span class="line"><span class="comment">// if you want to disable the auto completion, add this code.</span></span><br><span class="line">editor.getComponent(EditorAutoCompletion.class).setEnabled(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Delete whole empty line is sometimes annoying, you can disable it via this code.</span></span><br><span class="line">editor.getProps().deleteEmptyLineFast = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure></div>

<hr>
<h1 id="Full-source-code"><a href="#Full-source-code" class="headerlink" title="Full source code"></a>Full source code</h1><p>Here are the source codes.</p>
<div class="tabs" id="tab-source_code"><ul class="nav-tabs"><li class="tab active"><a class="#source_code-1">Libraries</a></li><li class="tab"><a class="#source_code-2">Packages</a></li><li class="tab"><a class="#source_code-3">Layout</a></li><li class="tab"><a class="#source_code-4">Activity</a></li></ul><div class="tab-content"><div class="tab-pane active" id="source_code-1"><div class="highlight-container" data-rel="Gradle"><figure class="iseeu highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation(platform(<span class="string">&quot;io.github.Rosemoe.sora-editor:bom:0.18.1&quot;</span>))</span><br><span class="line">implementation(<span class="string">&quot;io.github.Rosemoe.sora-editor:editor&quot;</span>)</span><br><span class="line">implementation(<span class="string">&quot;io.github.Rosemoe.sora-editor:language-textmate&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<p>Or, if you IDE doesn’t support <code>bom</code> importing.</p>
<div class="highlight-container" data-rel="Gradle"><figure class="iseeu highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&quot;io.github.Rosemoe.sora-editor:editor:0.18.1&quot;</span></span><br><span class="line">implementation <span class="string">&quot;io.github.Rosemoe.sora-editor:language-textmate:0.18.1&quot;</span></span><br></pre></td></tr></table></figure></div></div><div class="tab-pane" id="source_code-2"><p>If there’s no quick fix of packages importing on your IDE, here are the packages that you might need.</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.eclipse.tm4e.core.registry.IThemeSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.widget.CodeEditor;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.TextMateColorScheme;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.TextMateLanguage;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.registry.FileProviderRegistry;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.registry.GrammarRegistry;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.registry.ThemeRegistry;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.registry.model.ThemeModel;</span><br><span class="line"><span class="keyword">import</span> io.github.rosemoe.sora.langs.textmate.registry.provider.AssetsFileResolver;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p><strong>You’re not required to import kind of <code>org.eclipse.tm4e.core</code> dependencies on your own</strong>, Sora Editor includes them by default.</p>
</blockquote></div><div class="tab-pane" id="source_code-3"><div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">io.github.rosemoe.sora.widget.CodeEditor</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/editor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div><div class="tab-pane" id="source_code-4"><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SYNTAX_LANG</span> <span class="operator">=</span> <span class="string">&quot;source.java&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">THEME_DIR</span> <span class="operator">=</span> <span class="string">&quot;textmate/themes/&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LANGUAGE_DIR</span> <span class="operator">=</span> <span class="string">&quot;textmate/langauges/&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] themes = &#123;<span class="string">&quot;quietlight.json&quot;</span>, <span class="string">&quot;darcula.json&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        loadDefaultThemes();</span><br><span class="line">        loadDefaultLanguages();</span><br><span class="line"></span><br><span class="line">        ensureTextmateTheme();</span><br><span class="line"></span><br><span class="line">        applyThemes(); <span class="comment">// you can disable this method if you just need a single theme without dynamic day/night themes</span></span><br><span class="line">        applyLanguages();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">loadDefaultThemes</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileProviderRegistry.getInstance().addFileProvider(<span class="keyword">new</span> <span class="title class_">AssetsFileResolver</span>(getAssets()));</span><br><span class="line"></span><br><span class="line">            <span class="type">ThemeRegistry</span> <span class="variable">themeRegistry</span> <span class="operator">=</span> ThemeRegistry.getInstance();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; themes.length;) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> themes[i];</span><br><span class="line">                <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> THEME_DIR + name;</span><br><span class="line">                themeRegistry.loadTheme(<span class="keyword">new</span> <span class="title class_">ThemeModel</span>(IThemeSource.fromInputStream(FileProviderRegistry.getInstance().tryGetInputStream(path), path, <span class="literal">null</span>), name));</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">loadDefaultLanguages</span><span class="params">()</span> &#123;</span><br><span class="line">        GrammarRegistry.getInstance().loadGrammars(LANGUAGE_DIR + <span class="string">&quot;languages.json&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureTextmateTheme</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">EditorColorScheme</span> <span class="variable">colorScheme</span> <span class="operator">=</span> editor.getColorScheme();</span><br><span class="line">            <span class="keyword">if</span> (!(colorScheme <span class="keyword">instanceof</span> TextMateColorScheme)) &#123;</span><br><span class="line">                colorScheme = TextMateColorScheme.create(ThemeRegistry.getInstance());</span><br><span class="line">                editor.setColorScheme(colorScheme);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Not really necessary if you just need a single theme without dynamic day/night themes */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">applyThemes</span><span class="params">()</span> &#123;</span><br><span class="line">        String theme;</span><br><span class="line">        theme = isInNightMode() ? <span class="string">&quot;material_palenight.json&quot;</span> : <span class="string">&quot;material_lighter.json&quot;</span>;</span><br><span class="line"></span><br><span class="line">        ThemeRegistry.getInstance().setTheme(theme);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">applyLanguages</span><span class="params">()</span> &#123;</span><br><span class="line">        ensureTextmateTheme();</span><br><span class="line"></span><br><span class="line">        TextMateLanguage language;</span><br><span class="line">        <span class="type">Language</span> <span class="variable">editorLanguage</span> <span class="operator">=</span> editor.getEditorLanguage();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (editorLanguage <span class="keyword">instanceof</span> TextMateLanguage) &#123;</span><br><span class="line">            language = (TextMateLanguage) editorLanguage;</span><br><span class="line">            language.updateLanguage(SYNTAX_LANG);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            language = TextMateLanguage.create(SYNTAX_LANG, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        editor.setEditorLanguage(language);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isInNightMode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mode</span> <span class="operator">=</span> getResources().getConfiguration().uiMode &amp; Configuration.UI_MODE_NIGHT_MASK;</span><br><span class="line">        <span class="keyword">switch</span> (mode) &#123;</span><br><span class="line">            <span class="keyword">case</span> Configuration.UI_MODE_NIGHT_YES:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> Configuration.UI_MODE_NIGHT_NO:</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></div>

<hr>
<p>That’s all. I hope this blog post helps you.</p>

            </div>

            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/Java/">#Java</a>&nbsp;
                        </li>
                    
                </ul>
            

            <div class="recommended-article">
  <div class="recommended-article-header">
    <i aria-hidden="true"></i><span>相關文章</span>
  </div>
  <div class="recommended-article-group"><a class="recommended-article-item" href="/post/android_dev_online-compiler.html" title="Create online compiler android app" rel="bookmark">
    <img src="https://i.imgur.com/vBnOQMV.jpg" alt="Create online compiler android app">
    <span class="title">Create online compiler android app</span>
  </a><a class="recommended-article-item" href="/post/android_dev_modern_dialog_library_tutorial.html" title="Modern Dialog - Get Started" rel="bookmark">
    <img src="https://i.imgur.com/tyHG03D.jpg" alt="Modern Dialog - Get Started">
    <span class="title">Modern Dialog - Get Started</span>
  </a><a class="recommended-article-item" href="/post/android_dev_simple_firebase_blog_app.html" title="Create simple blog app with Firebase" rel="bookmark">
    <img src="https://i.imgur.com/AksMemi.jpg" alt="Create simple blog app with Firebase">
    <span class="title">Create simple blog app with Firebase</span>
  </a></div>
</div>

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/post/android_dev_modern_dialog_library_tutorial.html"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">Modern Dialog - Get Started</span>
                                    <span class="post-nav-item">上一篇</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/post/android_dev_custom_progress_dialog.html"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">建立自訂載入對話框</span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;留言
    </div>
    

        
            
    <div id="gitalk-container"></div>
    <script data-pjax
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script data-pjax>

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '548e3371016b4d8243f2',
                    clientSecret: 'cfcf19408aacef6c9613469bd924d8fe6a96a5b2',
                    repo: 'bluewhaleyt.github.io',
                    owner: 'BlueWhaleYT',
                    admin: ['BlueWhaleYT'],
                    id: __gitalk__pathname,
                    language: 'zh-TW'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('true') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此頁目錄</div>
        <div class="page-title">Using Sora Editor with TextMate 0.18.1</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Why-this-post"><span class="nav-number">1.</span> <span class="nav-text">Why this post?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Resources"><span class="nav-number">2.</span> <span class="nav-text">Resources</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Theme-files"><span class="nav-number">2.1.</span> <span class="nav-text">Theme files</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Language-files"><span class="nav-number">2.2.</span> <span class="nav-text">Language files</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Embedded-languages"><span class="nav-number">2.2.1.</span> <span class="nav-text">Embedded languages</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Programs"><span class="nav-number">3.</span> <span class="nav-text">Programs</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Configuration"><span class="nav-number">3.1.</span> <span class="nav-text">Configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Load-Default-Themes"><span class="nav-number">3.1.1.</span> <span class="nav-text">Load Default Themes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Load-Default-Languages"><span class="nav-number">3.1.2.</span> <span class="nav-text">Load Default Languages</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-grammar-base"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">Using grammar base</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-DSL"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">Using DSL</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ensure-TextMate-Themes"><span class="nav-number">3.1.3.</span> <span class="nav-text">Ensure TextMate Themes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Apply-Themes"><span class="nav-number">3.1.4.</span> <span class="nav-text">Apply Themes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Apply-Languages"><span class="nav-number">3.1.5.</span> <span class="nav-text">Apply Languages</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-programs"><span class="nav-number">3.2.</span> <span class="nav-text">Other programs</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Full-source-code"><span class="nav-number">4.</span> <span class="nav-text">Full source code</span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">BlueWhaleYT</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        讀者&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        閱覽&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container"><?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 框架</span>
                <br>
            <span class="theme-version-container">主題&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.2</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2022/8/17 11:45:14
            </div>
            <div>
                博客已運行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小時 <span class="odometer" id="runtime_minutes"></span> 分鐘 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <div class="customize-info info-item">Credits: <a target="_blank" rel="noopener" href='https://www.freepik.com/'>Freepik</a>.</div>
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜尋..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>



    
<script src="/js/tools/localSearch.js"></script>




    
<script src="/js/tools/codeBlock.js"></script>






    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/layouts/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>




    
<script src="/js/libs/mermaid.min.js"></script>

    
<script src="/js/plugins/mermaid.js"></script>





<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
